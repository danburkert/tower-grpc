language: rust
sudo: required
services:
  - docker

cache: cargo

matrix:
  include:
    - rust: stable
    - rust: nightly
  allow_failures:
    - rust: nightly

script:
  - cargo test
  # run interop tests
  - |
    cd tower-grpc-interop && 
    docker-compose up --abort-on-container-exit

notifications:
  email:
    on_success: never
