language: rust
sudo: required
services:
  - docker

cache: cargo

matrix:
  include:
    - rust: stable
    - rust: nightly
  allow_failures:
    - rust: nightly

script:
  - cargo test
  # run interop tests
  - docker-compose --file=tower-grpc-interop/docker-compose.yml up --exit-code-from client-tower

notifications:
  email:
    on_success: never
